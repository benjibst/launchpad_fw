#pragma once

#include "driver/gpio.h"
#include "driver/i2c_master.h"

typedef enum
{
    AT42QT2120_CHIP_ID = 0,
    AT42QT2120_FIRMWARE_VERSION,
    AT42QT2120_DETECTION_STATUS,
    AT42QT2120_KEY_STATUS,
    AT42QT2120_KEY_STATUS2,
    AT42QT2120_SLIDER_POSITION = 5,
    AT42QT2120_CALIBRATE,
    AT42QT2120_RESET,
    AT42QT2120_LP,
    AT42QT2120_TTD,
    AT42QT2120_ATD,
    AT42QT2120_DI,
    AT42QT2120_TRD,
    AT42QT2120_DHT,
    AT42QT2120_SLIDER_OPTION,
    AT42QT2120_CHARDE_TIME,
    AT42QT2120_KEY0_DTHR,
    AT42QT2120_KEY1_DTHR,
    AT42QT2120_KEY2_DTHR,
    AT42QT2120_KEY3_DTHR,
    AT42QT2120_KEY4_DTHR,
    AT42QT2120_KEY5_DTHR,
    AT42QT2120_KEY6_DTHR,
    AT42QT2120_KEY7_DTHR,
    AT42QT2120_KEY8_DTHR,
    AT42QT2120_KEY9_DTHR,
    AT42QT2120_KEY10_DTHR,
    AT42QT2120_KEY11_DTHR,
    AT42QT2120_KEY0_CTRL,
    AT42QT2120_KEY1_CTRL,
    AT42QT2120_KEY2_CTRL,
    AT42QT2120_KEY3_CTRL,
    AT42QT2120_KEY4_CTRL,
    AT42QT2120_KEY5_CTRL,
    AT42QT2120_KEY6_CTRL,
    AT42QT2120_KEY7_CTRL,
    AT42QT2120_KEY8_CTRL,
    AT42QT2120_KEY9_CTRL,
    AT42QT2120_KEY10_CTRL,
    AT42QT2120_KEY11_CTRL,
    AT42QT2120_KEY0_PULSE_SCALE,
    AT42QT2120_KEY1_PULSE_SCALE,
    AT42QT2120_KEY2_PULSE_SCALE,
    AT42QT2120_KEY3_PULSE_SCALE,
    AT42QT2120_KEY4_PULSE_SCALE,
    AT42QT2120_KEY5_PULSE_SCALE,
    AT42QT2120_KEY6_PULSE_SCALE,
    AT42QT2120_KEY7_PULSE_SCALE,
    AT42QT2120_KEY8_PULSE_SCALE,
    AT42QT2120_KEY9_PULSE_SCALE,
    AT42QT2120_KEY10_PULSE_SCALE,
    AT42QT2120_KEY11_PULSE_SCALE,
    AT42QT2120_KEY0_SIGNAL,
    AT42QT2120_KEY1_SIGNAL = 54,
    AT42QT2120_KEY2_SIGNAL = 56,
    AT42QT2120_KEY3_SIGNAL = 58,
    AT42QT2120_KEY4_SIGNAL = 60,
    AT42QT2120_KEY5_SIGNAL = 62,
    AT42QT2120_KEY6_SIGNAL = 64,
    AT42QT2120_KEY7_SIGNAL = 66,
    AT42QT2120_KEY8_SIGNAL = 68,
    AT42QT2120_KEY9_SIGNAL = 70,
    AT42QT2120_KEY10_SIGNAL = 72,
    AT42QT2120_KEY11_SIGNAL = 74,
    AT42QT2120_KEY0_REFERENCE = 76,
    AT42QT2120_KEY1_REFERENCE = 78,
    AT42QT2120_KEY2_REFERENCE = 80,
    AT42QT2120_KEY3_REFERENCE = 82,
    AT42QT2120_KEY4_REFERENCE = 84,
    AT42QT2120_KEY5_REFERENCE = 86,
    AT42QT2120_KEY6_REFERENCE = 88,
    AT42QT2120_KEY7_REFERENCE = 90,
    AT42QT2120_KEY8_REFERENCE = 92,
    AT42QT2120_KEY9_REFERENCE = 94,
    AT42QT2120_KEY10_REFERENCE = 96,
    AT42QT2120_KEY11_REFERENCE = 98,
} AT42QT2120_regaddr_t;

#define AT42QT2120_I2C_ADDR 0x1C
typedef struct
{
    gpio_num_t CHANGE_pin;
    uint8_t i2c_addr;
    uint32_t scl_speed;
} AT42QT2120_config_t;

typedef struct
{
    i2c_master_dev_handle_t i2c_slave;
} AT42QT2120_handle_t;

esp_err_t AT42QT2120_init(i2c_master_bus_handle_t bus, const AT42QT2120_config_t *cfg, AT42QT2120_handle_t *handle);
esp_err_t AT42QT2120_write_reg(AT42QT2120_handle_t *handle, AT42QT2120_regaddr_t reg, uint8_t data);
esp_err_t AT42QT2120_read_reg(AT42QT2120_handle_t *handle, AT42QT2120_regaddr_t reg, uint8_t *data);
